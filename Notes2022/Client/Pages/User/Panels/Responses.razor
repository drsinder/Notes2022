@if (Headers == null)
{
    <p class="center"><em>Loading...</em></p>
}
else
{
    <div>
        @if (Headers.Count > 0)
        {
            <span>Show Response Content on Expand&nbsp; <SfSwitch @bind-Checked="@ShowContent"></SfSwitch>&nbsp; Expand All&nbsp; <SfSwitch @bind-Checked="@ExpandAll" ValueChange="ExpandAllChange" TChecked="bool"></SfSwitch></span>
        }
    </div>
    @if (Headers.Count > 0)
    {
        <SfGrid @ref="@sfGrid2" DataSource="Headers" AllowPaging="false" AllowSelection="true" EnableHover="true">
            <GridEvents DataBound="DataBoundHandler" RowSelected="DisplayIt" TValue="NoteHeader"></GridEvents>
            <GridTemplates>
                <DetailTemplate>
                    @if (ShowContent)
            {
                var current2 = (context as NoteHeader);
                <NotePanel NoteId="@current2.Id" ShowChild="false" IsRootNote="false" IsMini="true"></NotePanel>
            }
        </DetailTemplate>
    </GridTemplates>
    <GridColumns>
        <GridColumn Field=@nameof(NoteHeader.ResponseOrdinal) HeaderText="Resp. #" TextAlign="TextAlign.Left" Width="25" IsPrimaryKey="true"></GridColumn>
        <GridColumn Field=@nameof(NoteHeader.NoteSubject) HeaderText="Subject" TextAlign="TextAlign.Left" Width="150"></GridColumn>
        <GridColumn Field=@nameof(NoteHeader.AuthorName) HeaderText="Writer" TextAlign="TextAlign.Left" Width="80"></GridColumn>
        <GridColumn Field=@nameof(NoteHeader.CreateDate) HeaderText="Date/Time" TextAlign="TextAlign.Left" Width="60">
            <Template Context="inner">
                @{
                    var itemx = (inner as NoteHeader);
                    <span>@Globals.LocalTimeBlazor(itemx.CreateDate)</span>
                }
            </Template>
        </GridColumn>
    </GridColumns>
</SfGrid>
    }
}
